parameters:
- name: baseFolder
  type: string
- name: codeFolder
  type: string

steps:
  # Questa, va a compilare il progetto in modalit√† release
  # - script: dotnet build --configuration Release
  #   displayName: 'Build project'
  - task: Bash@3
    displayName: List all files
    name: List all current dir
    inputs:
      targetType: inline
      script: |
        ls -al
        
  - task: Bash@3
    displayName: List all files
    name: List all System.DefaultWorkingDirectory 
    inputs:
      targetType: inline
      script: |
        ls $(System.DefaultWorkingDirectory) -al

  - task: NuGetCommand@2
    displayName: NuGet restore
    inputs:
      command: 'restore'
      restoreSolution: '**/${{ parameters.baseFolder }}/*.sln'
      feedsToUse: 'config'
      nugetConfigPath: '$(System.DefaultWorkingDirectory)/${{ parameters.baseFolder }}/NuGet.Config'
      restoreDirectory: '$(System.DefaultWorkingDirectory)/${{ parameters.baseFolder }}/packages'    

  - task: VSBuild@1
    inputs:
      solution: '$(System.DefaultWorkingDirectory)/${{ parameters.baseFolder }}/${{ parameters.codeFolder }}/*.csproj'
      configuration: 'Release'
      clean: true
